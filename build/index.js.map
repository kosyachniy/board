{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./canvas/canvas-designer-widget.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","designer","this","iframe","tools","line","arrow","pencil","dragSingle","dragMultiple","eraser","rectangle","arc","bezier","quadratic","text","image","pdf","marker","zoom","lineWidth","colorsPicker","extraOptions","code","icons","pdf_next","pdf_prev","pdf_close","selectedIcon","syncDataListener","data","dataURLListener","dataURL","captureStreamCallback","onMessage","event","uid","sdp","canvasDesignerSyncData","pointsLength","points","length","window","webrtcHandler","createAnswer","response","postMessage","stream","crypto","getRandomValues","navigator","userAgent","indexOf","a","Uint32Array","token","toString","Math","random","Date","getTime","replace","getRandomString","appendTo","parentNode","callback","document","createElement","onload","src","widgetHtmlURL","widgetJsURL","JSON","stringify","style","width","height","border","removeEventListener","addEventListener","appendChild","destroy","removeChild","addSyncListener","syncData","setTools","_tools","setSelected","icon","toDataURL","format","genDataURL","sync","syncPoints","undo","index","tool","message","contentWindow","captureStream","clearCanvas","renderStream"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// _______________\n// Canvas-Designer\n\n// Open-Sourced: https://github.com/muaz-khan/Canvas-Designer\n\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\nfunction CanvasDesigner() {\n    var designer = this;\n    designer.iframe = null;\n\n    var tools = {\n        line: true,\n        arrow: true,\n        pencil: true,\n        dragSingle: true,\n        dragMultiple: true,\n        eraser: true,\n        rectangle: true,\n        arc: true,\n        bezier: true,\n        quadratic: true,\n        text: true,\n        image: true,\n        pdf: true,\n        marker: true,\n        zoom: true,\n        lineWidth: true,\n        colorsPicker: true,\n        extraOptions: true,\n        code: true\n    };\n\n    designer.icons = {\n        line: null,\n        arrow: null,\n        pencil: null,\n        dragSingle: null,\n        dragMultiple: null,\n        eraser: null,\n        rectangle: null,\n        arc: null,\n        bezier: null,\n        quadratic: null,\n        text: null,\n        image: null,\n        pdf: null,\n        pdf_next: null,\n        pdf_prev: null,\n        pdf_close: null,\n        marker: null,\n        zoom: null,\n        lineWidth: null,\n        colorsPicker: null,\n        extraOptions: null,\n        code: null\n    };\n\n    var selectedIcon = 'pencil';\n\n    function syncData(data) {\n        if (!designer.iframe) return;\n\n        designer.postMessage({\n            canvasDesignerSyncData: data\n        });\n    }\n\n    var syncDataListener = function(data) {};\n    var dataURLListener = function(dataURL) {};\n    var captureStreamCallback = function() {};\n\n    function onMessage(event) {\n        if (!event.data || event.data.uid !== designer.uid) return;\n\n        if(!!event.data.sdp) {\n            window.webrtcHandler.createAnswer(event.data, function(response) {\n                if(response.sdp) {\n                    designer.postMessage(response);\n                    return;\n                }\n\n                captureStreamCallback(response.stream);\n            });\n            return;\n        }\n\n        if (!!event.data.canvasDesignerSyncData) {\n            designer.pointsLength = event.data.canvasDesignerSyncData.points.length;\n            syncDataListener(event.data.canvasDesignerSyncData);\n            return;\n        }\n\n        if (!!event.data.dataURL) {\n            dataURLListener(event.data.dataURL);\n            return;\n        }\n    }\n\n    function getRandomString() {\n        if (window.crypto && window.crypto.getRandomValues && navigator.userAgent.indexOf('Safari') === -1) {\n            var a = window.crypto.getRandomValues(new Uint32Array(3)),\n                token = '';\n            for (var i = 0, l = a.length; i < l; i++) {\n                token += a[i].toString(36);\n            }\n            return token;\n        } else {\n            return (Math.random() * new Date().getTime()).toString(36).replace(/\\./g, '');\n        }\n    }\n\n    designer.uid = getRandomString();\n\n    designer.appendTo = function(parentNode, callback) {\n        callback = callback || function() {};\n\n        designer.iframe = document.createElement('iframe');\n\n        // designer load callback\n        designer.iframe.onload = function() {\n            callback();\n            callback = null;\n        };\n\n        designer.iframe.src = designer.widgetHtmlURL + '?widgetJsURL=' + designer.widgetJsURL + '&tools=' + JSON.stringify(tools) + '&selectedIcon=' + selectedIcon + '&icons=' + JSON.stringify(designer.icons);\n        designer.iframe.style.width = '100%';\n        designer.iframe.style.height = '100%';\n        designer.iframe.style.border = 0;\n\n        window.removeEventListener('message', onMessage);\n        window.addEventListener('message', onMessage, false);\n\n        parentNode.appendChild(designer.iframe);\n    };\n\n    designer.destroy = function() {\n        if (designer.iframe) {\n            designer.iframe.parentNode.removeChild(designer.iframe);\n            designer.iframe = null;\n        }\n        window.removeEventListener('message', onMessage);\n    };\n\n    designer.addSyncListener = function(callback) {\n        syncDataListener = callback;\n    };\n\n    designer.syncData = syncData;\n\n    designer.setTools = function(_tools) {\n        tools = _tools;\n    };\n\n    designer.setSelected = function(icon) {\n        if (typeof tools[icon] !== 'undefined') {\n            selectedIcon = icon;\n        }\n    };\n\n    designer.toDataURL = function(format, callback) {\n        dataURLListener = callback;\n\n        if (!designer.iframe) return;\n        designer.postMessage({\n            genDataURL: true,\n            format: format\n        });\n    };\n\n    designer.sync = function() {\n        if (!designer.iframe) return;\n        designer.postMessage({\n            syncPoints: true\n        });\n    };\n\n    designer.pointsLength = 0;\n\n    designer.undo = function(index) {\n        if (!designer.iframe) return;\n\n        if(typeof index === 'string' && tools[index]) {\n            designer.postMessage({\n                undo: true,\n                tool: index\n            });\n            return;\n        }\n\n        designer.postMessage({\n            undo: true,\n            index: index || designer.pointsLength - 1 || -1\n        });\n    };\n\n    designer.postMessage = function(message) {\n        if (!designer.iframe) return;\n\n        message.uid = designer.uid;\n        designer.iframe.contentWindow.postMessage(message, '*');\n    };\n\n    designer.captureStream = function(callback) {\n        if (!designer.iframe) return;\n\n        captureStreamCallback = callback;\n        designer.postMessage({\n            captureStream: true\n        });\n    };\n\n    designer.clearCanvas = function () {\n        if (!designer.iframe) return;\n\n        designer.postMessage({\n            clearCanvas: true\n        });\n    };\n\n    designer.renderStream = function() {\n        if (!designer.iframe) return;\n\n        designer.postMessage({\n            renderStream: true\n        });\n    };\n\n    designer.widgetHtmlURL = 'widget.html';\n    designer.widgetJsURL = 'widget.min.js';\n}\n\nmodule.exports = CanvasDesigner;"],"sourceRoot":""}